<button mat-raised-button color="primary" routerLink="/admin/topics">Back</button>
<mat-card class="topic-card">
    <mat-card-content>
      <form [formGroup]="topicForm" (ngSubmit)="onSubmit()">
        
        <div formArrayName="topics" class="topic-fields-container">
          
          <div *ngFor="let topicGroup of topicsArray.controls; let i = index" [formGroupName]="i" class="topic-field-wrapper">
            
            <mat-form-field appearance="outline" class="topic-input-field">
              <mat-label>Topic Name #{{ i + 1 }}</mat-label>
              <input matInput formControlName="name" placeholder="e.g., Topic A, B, C">
              <mat-error *ngIf="topicGroup.get('name')?.invalid && topicGroup.get('name')?.touched">
                Topic name is required.
              </mat-error>
            </mat-form-field>
  
            <button 
              mat-icon-button 
              color="warn" 
              (click)="removeTopic(i)" 
              *ngIf="topicsArray.length > 1"
              type="button" 
              aria-label="Remove topic field">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>
        
        <div class="form-actions">
          <button mat-raised-button color="primary" (click)="addTopic()" type="button">
            <mat-icon>add</mat-icon> Add More Topic
          </button>
          
          <button mat-raised-button color="accent" type="submit" [disabled]="topicForm.invalid">
            Save Topics
          </button>
        </div>
  
      </form>
    </mat-card-content>
  </mat-card>